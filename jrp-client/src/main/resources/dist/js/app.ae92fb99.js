(function(){"use strict";var e={7775:function(e,t,r){var o=r(5130),n=r(6768);const s={id:"app"};function a(e,t,r,o,a,l){const u=(0,n.g2)("ProxyConfigForm");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(u)])}r(4114);var l=r(4232),u=r(144),i=r(2933),p=r(1219),c=r(4373);const m=c.A.create({baseURL:"/jrp-client",headers:{"Content-Type":"application/json"}});m.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),m.interceptors.response.use(e=>e.data,e=>{if(e.response)switch(e.response.status){case 401:break;case 404:break;default:break}return Promise.reject(e)});var f={getConfig(){return m.get("/config/list")},saveConfig(e){return m.post("/config/save",e)},status(){return m.get("/config/status")},getResource(e){return m.get(`/resources/${e}`)},createResource(e){return m.post("/resources",e)},updateResource(e,t){return m.put(`/resources/${e}`,t)},deleteResource(e){return m.delete(`/resources/${e}`)}};const d={key:0,class:"loading-indicator"},g={key:1,class:"error-message"},_={key:2},b={key:0},y=["href"],v={key:1},k={style:{"margin-top":"20px","text-align":"right"}};var x={__name:"ProxyConfigForm",setup(e){const t=(0,u.KR)();(0,n.sV)(()=>{h(),x()});const r=(0,u.Kh)({success:!1,message:"",remoteHost:"",remote_proxies:[{name:"",type:"HTTP",remote_port:null,proxy_pass:""}]}),o={name:[{required:!0,message:"请输入服务名称",trigger:"blur"},{min:1,max:50,message:"长度应在 1 到 50 个字符之间",trigger:"blur"}],proxy_pass:[{required:!0,message:"请输入服务地址",trigger:"blur"},{validator:s,trigger:"blur"}],type:[{required:!0,message:"请选择穿透类型",trigger:"change"}],remote_port:[{required:!0,message:"请输入外网访问端口",trigger:"blur"},{type:"number",min:1,max:65535,message:"端口应在 1-65535 之间",trigger:"blur"}]};function s(e,t,r){if(!t)return r(new Error("请输入服务地址"));const o=/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,n=/^(\d{1,3}\.){3}\d{1,3}:\d+$/;o.test(t)||n.test(t)?r():r(new Error("请输入有效的服务地址格式"))}const a=(0,u.KR)(!1),c=(0,u.KR)(null);let m=(0,u.KR)(!1);function x(){f.status().then(e=>{r.success=e.success,r.message=e.message,r.remoteHost=e.remoteHost})}async function h(){a.value=!0,c.value=null;try{const e=await f.getConfig();r.remote_proxies=e}catch(e){c.value="Failed to load configuration",console.error("Error fetching config:",e)}finally{a.value=!1}}function F(){i.s.confirm("确定要还原配置吗？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f.getConfig().then(e=>{r.remote_proxies=e,(0,p.nk)({type:"success",message:"还原配置成功"}),r.success=!1,r.message="",m.value=!1,x()}).catch(()=>{(0,p.nk)({type:"info",message:"还原配置失败"})})}).catch(()=>{(0,p.nk)({type:"info",message:"已取消还原配置"})})}function C(){m.value=!0,r.remote_proxies.push({name:"",type:"HTTP",remote_port:null,proxy_pass:""})}function w(e){r.remote_proxies.splice(e,1)}function T(){t.value.validate(e=>{if(!e)return(0,p.nk)({type:"error",message:"表单填写有误，请检查后重新提交"}),!1;i.s.confirm("确定要保存配置吗？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f.saveConfig(r.remote_proxies).then(()=>{r.success=!1,r.message="",m.value=!0,(0,p.nk)({type:"success",message:"保存配置成功"}),r.success=!1,r.message="",m.value=!1,setTimeout(()=>{x()},1500)}).catch(()=>{(0,p.nk)({type:"info",message:"保存配置失败"})})}).catch(()=>{(0,p.nk)({type:"info",message:"已取消保存配置"})})})}return(e,s)=>{const i=(0,n.g2)("el-button"),p=(0,n.g2)("el-input"),f=(0,n.g2)("el-form-item"),h=(0,n.g2)("el-table-column"),P=(0,n.g2)("el-option"),V=(0,n.g2)("el-select"),j=(0,n.g2)("el-table"),E=(0,n.g2)("el-card"),$=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)("div",null,[a.value?((0,n.uX)(),(0,n.CE)("div",d," Loading configuration... ")):c.value?((0,n.uX)(),(0,n.CE)("div",g,(0,l.v_)(c.value),1)):((0,n.uX)(),(0,n.CE)("div",_,[(0,n.bF)(E,{class:"proxy-config-form"},{default:(0,n.k6)(()=>[(0,n.bF)($,{ref_key:"proxyConfigFormRef",ref:t,model:r,rules:o,"label-width":"0px"},{default:(0,n.k6)(()=>[(0,n.bF)(E,{class:"proxies-section"},{default:(0,n.k6)(()=>[s[6]||(s[6]=(0,n.Lk)("h2",null,"内网穿透客户端-穿透配置",-1)),(0,n.Lk)("div",null,[s[1]||(s[1]=(0,n.eW)("内网穿透状态：",-1)),r.success&&!(0,u.R1)(m)?((0,n.uX)(),(0,n.CE)("span",{key:0,style:(0,l.Tr)(r.success?"color:green":"color:red")},(0,l.v_)(r.message),5)):(0,n.Q3)("",!0),(0,u.R1)(m)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(i,{key:1,type:"primary",onClick:x,size:"small"},{default:(0,n.k6)(()=>s[0]||(s[0]=[(0,n.eW)("刷新状态 ",-1)])),_:1,__:[0]}))]),(0,n.bF)(j,{data:r.remote_proxies,style:{width:"100%"},class:"proxy-table"},{default:(0,n.k6)(()=>[(0,n.bF)(h,{prop:"name",label:"服务名称"},{default:(0,n.k6)(({row:e,$index:t})=>[(0,n.bF)(f,{prop:`remote_proxies[${t}].name`,rules:o.name},{default:(0,n.k6)(()=>[(0,n.bF)(p,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,size:"large",class:"table-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),(0,n.bF)(h,{prop:"proxy_pass",label:"服务地址"},{default:(0,n.k6)(({row:e,$index:t})=>[(0,n.bF)(f,{prop:`remote_proxies[${t}].proxy_pass`,rules:o.proxy_pass},{default:(0,n.k6)(()=>[(0,n.bF)(p,{modelValue:e.proxy_pass,"onUpdate:modelValue":t=>e.proxy_pass=t,size:"large",class:"table-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),(0,n.bF)(h,{prop:"type",label:"穿透类型"},{default:(0,n.k6)(({row:e,$index:t})=>[(0,n.bF)(f,{prop:`remote_proxies[${t}].type`,rules:o.type},{default:(0,n.k6)(()=>[(0,n.bF)(V,{modelValue:e.type,"onUpdate:modelValue":t=>e.type=t,size:"large",class:"table-select"},{default:(0,n.k6)(()=>[(0,n.bF)(P,{label:"HTTP协议",value:"HTTP"}),(0,n.bF)(P,{label:"TCP协议",value:"TCP"}),(0,n.bF)(P,{label:"UDP协议",value:"UDP"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),(0,n.bF)(h,{prop:"remote_port",label:"穿透外网访问端口"},{default:(0,n.k6)(({row:e,$index:t})=>[(0,n.bF)(f,{prop:`remote_proxies[${t}].remote_port`,rules:o.remote_port},{default:(0,n.k6)(()=>[(0,n.bF)(p,{modelValue:e.remote_port,"onUpdate:modelValue":t=>e.remote_port=t,modelModifiers:{number:!0},type:"number",min:0,size:"large",class:"table-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),(0,n.bF)(h,{label:"穿透外网访问地址"},{default:(0,n.k6)(({row:e})=>[r.success&&e.remote_port&&!(0,u.R1)(m)?((0,n.uX)(),(0,n.CE)("span",b,["HTTP"==e.type?((0,n.uX)(),(0,n.CE)("a",{key:0,href:e.type.toLowerCase()+"://"+r.remoteHost+":"+e.remote_port,target:"_blank",style:{color:"#409eff","text-decoration":"underline"}},(0,l.v_)(e.type.toLowerCase()+"://")+(0,l.v_)(r.remoteHost+":"+e.remote_port),9,y)):(0,n.Q3)("",!0),"HTTP"!=e.type?((0,n.uX)(),(0,n.CE)("div",v,(0,l.v_)(r.remoteHost+":"+e.remote_port),1)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(h,{label:"操作",width:"100"},{default:(0,n.k6)(({$index:e})=>[(0,n.bF)(i,{type:"danger",onClick:t=>w(e)},{default:(0,n.k6)(()=>s[2]||(s[2]=[(0,n.eW)("删除 ",-1)])),_:2,__:[2]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),(0,n.Lk)("div",k,[(0,n.bF)(i,{type:"primary",onClick:C},{default:(0,n.k6)(()=>s[3]||(s[3]=[(0,n.eW)("添加配置",-1)])),_:1,__:[3]}),(0,n.bF)(i,{type:"primary",onClick:F},{default:(0,n.k6)(()=>s[4]||(s[4]=[(0,n.eW)("还原配置",-1)])),_:1,__:[4]}),(0,n.bF)(i,{type:"primary",onClick:T},{default:(0,n.k6)(()=>s[5]||(s[5]=[(0,n.eW)("保存并启用穿透",-1)])),_:1,__:[5]})])]),_:1,__:[6]})]),_:1},8,["model"])]),_:1})]))])}}},h=r(1241);const F=(0,h.A)(x,[["__scopeId","data-v-7a46408f"]]);var C=F,w={name:"App",components:{ProxyConfigForm:C}};const T=(0,h.A)(w,[["render",a]]);var P=T,V=r(7854);r(4188);const j=(0,o.Ef)(P);j.use(V.A),j.mount("#app")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,s){if(!o){var a=1/0;for(p=0;p<e.length;p++){o=e[p][0],n=e[p][1],s=e[p][2];for(var l=!0,u=0;u<o.length;u++)(!1&s||a>=s)&&Object.keys(r.O).every(function(e){return r.O[e](o[u])})?o.splice(u--,1):(l=!1,s<a&&(a=s));if(l){e.splice(p--,1);var i=n();void 0!==i&&(t=i)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[o,n,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,s,a=o[0],l=o[1],u=o[2],i=0;if(a.some(function(t){return 0!==e[t]})){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(u)var p=u(r)}for(t&&t(o);i<a.length;i++)s=a[i],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(p)},o=self["webpackChunkjrp_client_web"]=self["webpackChunkjrp_client_web"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],function(){return r(7775)});o=r.O(o)})();
//# sourceMappingURL=app.ae92fb99.js.map